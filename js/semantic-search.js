!function(S,q,P,k){"use strict";q=void 0!==q&&q.Math==Math?q:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),S.fn.search=function(u){var C,b=S(this),x=b.selector||"",w=(new Date).getTime(),F=[],D=u,T="string"==typeof D,j=[].slice.call(arguments,1);return S(this).each(function(){var f,o=S.isPlainObject(u)?S.extend(!0,{},S.fn.search.settings,u):S.extend({},S.fn.search.settings),h=o.className,l=o.metadata,d=o.regExp,a=o.fields,m=o.selector,p=o.error,e=o.namespace,n="."+e,t=e+"-module",g=S(this),v=g.find(m.prompt),s=g.find(m.searchButton),i=g.find(m.results),r=g.find(m.result),y=(g.find(m.category),this),c=g.data(t),A=!1,R=!1;f={initialize:function(){f.get.settings(),f.determine.searchFields(),f.bind.events(),f.set.type(),f.create.results(),f.instantiate()},instantiate:function(){c=f,g.data(t,f)},destroy:function(){g.off(n).removeData(t)},refresh:function(){v=g.find(m.prompt),s=g.find(m.searchButton),g.find(m.category),i=g.find(m.results),r=g.find(m.result)},refreshResults:function(){i=g.find(m.results),r=g.find(m.result)},bind:{events:function(){o.automatic&&(g.on(f.get.inputEvent()+n,m.prompt,f.event.input),v.attr("autocomplete","off")),g.on("focus"+n,m.prompt,f.event.focus).on("blur"+n,m.prompt,f.event.blur).on("keydown"+n,m.prompt,f.handleKeyboard).on("click"+n,m.searchButton,f.query).on("mousedown"+n,m.results,f.event.result.mousedown).on("mouseup"+n,m.results,f.event.result.mouseup).on("click"+n,m.result,f.event.result.click)}},determine:{searchFields:function(){u&&u.searchFields!==k&&(o.searchFields=u.searchFields)}},event:{input:function(){o.searchDelay?(clearTimeout(f.timer),f.timer=setTimeout(function(){f.is.focused()&&f.query()},o.searchDelay)):f.query()},focus:function(){f.set.focus(),o.searchOnFocus&&f.has.minimumCharacters()&&f.query(function(){f.can.show()&&f.showResults()})},blur:function(e){var t=P.activeElement===this,s=function(){f.cancel.query(),f.remove.focus(),f.timer=setTimeout(f.hideResults,o.hideDelay)};t||(R=!1,f.resultsClicked?g.one("click.close"+n,m.results,function(e){f.is.inMessage(e)||A?v.focus():(A=!1,f.is.animating()||f.is.hidden()||s())}):s())},result:{mousedown:function(){f.resultsClicked=!0},mouseup:function(){f.resultsClicked=!1},click:function(e){var t=S(this),s=t.find(m.title).eq(0),n=t.is("a[href]")?t:t.find("a[href]").eq(0),i=n.attr("href")||!1,a=n.attr("target")||!1,r=(s.html(),0<s.length&&s.text()),c=f.get.results(),u=t.data(l.result)||f.get.result(r,c);S.isFunction(o.onSelect)&&!1===o.onSelect.call(y,u,c)?A=!0:(f.hideResults(),r&&f.set.value(r),i&&("_blank"==a||e.ctrlKey?q.open(i):q.location.href=i))}}},handleKeyboard:function(e){var t,s=g.find(m.result),n=g.find(m.category),i=s.filter("."+h.active),a=s.index(i),r=s.length,c=0<i.length,u=e.which,o=13,l=38,d=40;if(u==27&&(f.hideResults(),R=!0),f.is.visible())if(u==o){if(0<s.filter("."+h.active).length)return f.event.result.click.call(s.filter("."+h.active),e),e.preventDefault(),!1}else u==l&&c?(t=a-1<0?a:a-1,n.removeClass(h.active),s.removeClass(h.active).eq(t).addClass(h.active).closest(n).addClass(h.active),e.preventDefault()):u==d&&(t=r<=a+1?a:a+1,n.removeClass(h.active),s.removeClass(h.active).eq(t).addClass(h.active).closest(n).addClass(h.active),e.preventDefault());else u==o&&(f.query(),f.set.buttonPressed(),v.one("keyup",f.remove.buttonFocus))},setup:{api:function(t,s){var e={on:!1,cache:o.cache,action:"search",urlData:{query:t},onSuccess:function(e){f.parse.response.call(y,e,t),s()},onFailure:function(){f.displayMessage(p.serverError),s()},onAbort:function(e){},onError:f.error};S.extend(!0,e,o.apiSettings),g.api(e)}},can:{useAPI:function(){return S.fn.api!==k},show:function(){return f.is.focused()&&!f.is.visible()&&!f.is.empty()},transition:function(){return o.transition&&S.fn.transition!==k&&g.transition("is supported")}},is:{animating:function(){return i.hasClass(h.animating)},hidden:function(){return i.hasClass(h.hidden)},inMessage:function(e){if(e.target){var t=S(e.target);return S.contains(P.documentElement,e.target)&&0<t.closest(m.message).length}},empty:function(){return""===i.html()},visible:function(){return 0<i.filter(":visible").length},focused:function(){return 0<v.filter(":focus").length}},get:{settings:function(){S.isPlainObject(u)&&u.searchFullText&&(o.fullTextSearch=u.searchFullText,f.error(o.error.oldSearchSyntax,y))},inputEvent:function(){var e=v[0];return e!==k&&e.oninput!==k?"input":e!==k&&e.onpropertychange!==k?"propertychange":"keyup"},value:function(){return v.val()},results:function(){return g.data(l.results)},result:function(s,e){var n=["title","id"],i=!1;return s=s!==k?s:f.get.value(),e=e!==k?e:f.get.results(),"category"===o.type?S.each(e,function(e,t){if(S.isArray(t.results)&&(i=f.search.object(s,t.results,n)[0]))return!1}):i=f.search.object(s,e,n)[0],i||!1}},select:{firstResult:function(){r.first().addClass(h.active)}},set:{focus:function(){g.addClass(h.focus)},loading:function(){g.addClass(h.loading)},value:function(e){v.val(e)},type:function(e){e=e||o.type,"category"==o.type&&g.addClass(o.type)},buttonPressed:function(){s.addClass(h.pressed)}},remove:{loading:function(){g.removeClass(h.loading)},focus:function(){g.removeClass(h.focus)},buttonPressed:function(){s.removeClass(h.pressed)}},query:function(e){e=S.isFunction(e)?e:function(){};var t=f.get.value(),s=f.read.cache(t);e=e||function(){},f.has.minimumCharacters()?(s?(f.save.results(s.results),f.addResults(s.html),f.inject.id(s.results),e()):S.isPlainObject(o.source)||S.isArray(o.source)?(f.search.local(t),e()):f.can.useAPI()?f.search.remote(t,e):(f.error(p.source),e()),o.onSearchQuery.call(y,t)):f.hideResults()},search:{local:function(e){var t,s=f.search.object(e,o.content);f.set.loading(),f.save.results(s),0<o.maxResults&&(s=s.slice(0,o.maxResults)),"category"==o.type&&(s=f.create.categoryResults(s)),t=f.generateResults({results:s}),f.remove.loading(),f.addResults(t),f.inject.id(s),f.write.cache(e,{html:t,results:s})},remote:function(e,t){t=S.isFunction(t)?t:function(){},g.api("is loading")&&g.api("abort"),f.setup.api(e,t),g.api("query")},object:function(n,t,e){var a=[],r=[],c=[],s=n.toString().replace(d.escape,"\\$&"),i=new RegExp(d.beginsWith+s,"i"),u=function(e,t){var s=-1==S.inArray(t,a),n=-1==S.inArray(t,c),i=-1==S.inArray(t,r);s&&n&&i&&e.push(t)};return t=t||o.source,e=e!==k?e:o.searchFields,S.isArray(e)||(e=[e]),t===k||!1===t?(f.error(p.source),[]):(S.each(e,function(e,s){S.each(t,function(e,t){"string"==typeof t[s]&&(-1!==t[s].search(i)?u(a,t):"exact"===o.fullTextSearch&&f.exactSearch(n,t[s])?u(r,t):1==o.fullTextSearch&&f.fuzzySearch(n,t[s])&&u(c,t))})}),S.merge(r,c),S.merge(a,r),a)}},exactSearch:function(e,t){return e=e.toLowerCase(),-1<(t=t.toLowerCase()).indexOf(e)},fuzzySearch:function(e,t){var s=t.length,n=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),s<n)return!1;if(n===s)return e===t;e:for(var i=0,a=0;i<n;i++){for(var r=e.charCodeAt(i);a<s;)if(t.charCodeAt(a++)===r)continue e;return!1}return!0},parse:{response:function(e,t){var s=f.generateResults(e);e!==k&&t!==k&&e[a.results]!==k&&(f.addResults(s),f.inject.id(e[a.results]),f.write.cache(t,{html:s,results:e[a.results]}),f.save.results(e[a.results]))}},cancel:{query:function(){f.can.useAPI()&&g.api("abort")}},has:{minimumCharacters:function(){return f.get.value().length>=o.minCharacters},results:function(){return 0!==i.length&&""!=i.html()}},clear:{cache:function(e){var t=g.data(l.cache);e?e&&t&&t[e]&&(delete t[e],g.data(l.cache,t)):g.removeData(l.cache)}},read:{cache:function(e){var t=g.data(l.cache);return!!o.cache&&("object"==typeof t&&t[e]!==k&&t[e])}},create:{categoryResults:function(e){var s={};return S.each(e,function(e,t){t.category&&(s[t.category]===k?s[t.category]={name:t.category,results:[t]}:s[t.category].results.push(t))}),s},id:function(e,t){var s=e+1;return t!==k?String.fromCharCode(97+t)+s:s},results:function(){0===i.length&&(i=S("<div />").addClass(h.results).appendTo(g))}},inject:{result:function(e,t,s){(s!==k?i.children().eq(s).children(m.results).first().children(m.result).eq(t):i.children(m.result).eq(t)).data(l.result,e)},id:function(n){var i=0,a=0;return"category"===o.type?S.each(n,function(e,n){a=0,S.each(n.results,function(e,t){var s=n.results[e];s.id===k&&(s.id=f.create.id(a,i)),f.inject.result(s,a,i),a++}),i++}):S.each(n,function(e,t){var s=n[e];s.id===k&&(s.id=f.create.id(a)),f.inject.result(s,a),a++}),n}},save:{results:function(e){g.data(l.results,e)}},write:{cache:function(e,t){var s=g.data(l.cache)!==k?g.data(l.cache):{};o.cache&&(s[e]=t,g.data(l.cache,s))}},addResults:function(e){if(S.isFunction(o.onResultsAdd)&&!1===o.onResultsAdd.call(i,e))return!1;e?(i.html(e),f.refreshResults(),o.selectFirstResult&&f.select.firstResult(),f.showResults()):f.hideResults(function(){i.empty()})},showResults:function(e){e=S.isFunction(e)?e:function(){},R||!f.is.visible()&&f.has.results()&&(f.can.transition()?i.transition({duration:o.duration,onComplete:function(){e()},queue:!0}):i.stop().fadeIn(o.duration),o.onResultsOpen.call(i))},hideResults:function(e){e=S.isFunction(e)?e:function(){},f.is.visible()&&(f.can.transition()?i.transition({duration:o.duration,onComplete:function(){e()},queue:!0}):i.stop().fadeOut(o.duration),o.onResultsClose.call(i))},generateResults:function(e){var t=o.templates[o.type],s=S.isPlainObject(e[a.results])&&!S.isEmptyObject(e[a.results]),n=S.isArray(e[a.results])&&0<e[a.results].length,i="";return s||n?(0<o.maxResults&&(s?"standard"==o.type&&f.error(p.maxResults):e[a.results]=e[a.results].slice(0,o.maxResults)),S.isFunction(t)?i=t(e,a):f.error(p.noTemplate,!1)):o.showNoResults&&(i=f.displayMessage(p.noResults,"empty")),o.onResults.call(y,e),i},displayMessage:function(e,t){return t=t||"standard",f.addResults(o.templates.message(e,t)),o.templates.message(e,t)},setting:function(e,t){if(S.isPlainObject(e))S.extend(!0,o,e);else{if(t===k)return o[e];o[e]=t}},internal:function(e,t){if(S.isPlainObject(e))S.extend(!0,f,e);else{if(t===k)return f[e];f[e]=t}},performance:{log:function(e){var t,s;o.performance&&(s=(t=(new Date).getTime())-(w||t),w=t,F.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":s})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var e=o.name+":",s=0;w=!1,clearTimeout(f.performance.timer),S.each(F,function(e,t){s+=t["Execution Time"]}),e+=" "+s+"ms",x&&(e+=" '"+x+"'"),1<b.length&&(e+=" ("+b.length+")"),(console.group!==k||console.table!==k)&&0<F.length&&(console.groupCollapsed(e),console.table?console.table(F):S.each(F,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),F=[]}},invoke:function(n,e,t){var i,a,s,r=c;return e=e||j,t=y||t,"string"==typeof n&&r!==k&&(n=n.split(/[\. ]/),i=n.length-1,S.each(n,function(e,t){var s=e!=i?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(S.isPlainObject(r[s])&&e!=i)r=r[s];else{if(r[s]!==k)return a=r[s],!1;if(!S.isPlainObject(r[t])||e==i)return r[t]!==k&&(a=r[t]),!1;r=r[t]}})),S.isFunction(a)?s=a.apply(t,e):a!==k&&(s=a),S.isArray(C)?C.push(s):C!==k?C=[C,s]:s!==k&&(C=s),a}},T?(c===k&&f.initialize(),f.invoke(D)):(c!==k&&c.invoke("destroy"),f.initialize())}),C!==k?C:this},S.fn.search.settings={name:"Search",namespace:"search",silent:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!0,searchOnFocus:!0,searchFields:["title","description"],displayField:"",fullTextSearch:"exact",automatic:!0,hideDelay:0,searchDelay:200,maxResults:5,cache:!0,showNoResults:!1,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",tip:"tip",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(e)?e.replace(/[&<>"'`]/g,function(e){return t[e]}):e},message:function(e,t){var s="";return e!==k&&t!==k&&(s+='<div class="message '+t+'">',s+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",s+="</div>"),s},category:function(e,s){var n="";S.fn.search.settings.templates.escape;return e[s.categoryResults]!==k&&(S.each(e[s.categoryResults],function(e,t){t[s.results]!==k&&0<t.results.length&&(n+='<div class="category">',t[s.categoryName]!==k&&(n+='<div class="name">'+t[s.categoryName]+"</div>"),n+='<div class="results">',S.each(t.results,function(e,t){t[s.url]?n+='<a class="result" href="'+t[s.url]+'">':n+='<a class="result">',t[s.image]!==k&&(null==t[s.image]?n+='<div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs="></div>':n+='<div class="image"> <img src="'+t[s.image]+'"></div>'),n+='<div class="content">',t[s.tip]!==k&&(n+='<div class="tip">'+t[s.tip]+"</div>"),t[s.title]!==k&&(n+='<div class="title">'+t[s.title]+"</div>"),t[s.description]!==k&&(n+='<div class="description">'+t[s.description]+"</div>"),n+="</div>",n+="</a>"}),n+="</div>",n+="</div>")}),e[s.action]&&(n+='<a href="'+e[s.action][s.actionURL]+'" class="action">'+e[s.action][s.actionText]+"</a>"),n)},standard:function(e,s){var n="";return e[s.results]!==k&&(S.each(e[s.results],function(e,t){t[s.url]?n+='<a class="result" href="'+t[s.url]+'">':n+='<a class="result">',t[s.image]!==k&&(null==t[s.image]?n+='<div class="image"> <img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs="></div>':n+='<div class="image"> <img  src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-original="'+t[s.image]+'"></div>'),n+='<div class="content">',t[s.tip]!==k&&(n+='<div class="tip">'+t[s.tip]+"</div>"),t[s.title]!==k&&(n+='<div class="title">'+t[s.title]+"</div>"),t[s.description]!==k&&(n+='<div class="description">'+t[s.description]+"</div>"),n+="</div>",n+="</a>"}),e[s.action]&&(n+='<a href="'+e[s.action][s.actionURL]+'" class="action">'+e[s.action][s.actionText]+"</a>"),n)}}}}(jQuery,window,document);