function capturePage(){var e,t=document.querySelector("#save-article-as-img"),n=window.getComputedStyle(t),o=$("#save-article-as-img .page"),a=$(":first-child",o).prop("offsetWidth")+n.paddingLeft+n.paddingRight,i=(e=o.each(function(){$(this).prop("offsetHeight")}),document.createElement("canvas"));return i.width=2*a,i.height=2*e,i.getContext("2d").scale(2,2),html2canvas(document.querySelector("#save-article-as-img"),{canvas:i,width:a,height:e,scale:2,useCORS:!0}).then(function(e){var t=e.getContext("2d");t.mozImageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.msImageSmoothingEnabled=!1,t.imageSmoothingEnabled=!1;var n=e.toDataURL("image/png"),o=document.createElement("a");o.href=URL.createObjectURL(dataURLtoBlob(n)),o.download="".concat(document.title.split("|").map(function(e){return e.trim()}).join("-"),".png"),o.click()}),!1}function dataURLtoBlob(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],o=atob(t[1]),a=o.length,i=new Uint8Array(a);a--;)i[a]=o.charCodeAt(a);return new Blob([i],{type:n})}$(document).ready(function(){$(".dropdown-content").parent().click(function(){var e;"block"===(e=$(this).find(".dropdown-content")).css("display")?(e.css("display","none"),$(".dropdown-content").on("mouseleave",null)):(e.css("display","block"),$(".dropdown-content").on("mouseleave",function(){$(".dropdown-content").css("display","none")}))})}),$(document).ready(function(){var e=document.querySelectorAll("img");lazyload(e)}),$(document).ready(function(){new Viewer(document.getElementById("content"),{filter:function(e){return function(e){if($img=$(e),$img.hasClass("no-photoswipe")||$img.hasClass("nozoom")||!$img.parent().is("figure")||$img.parent().is("div")&&!$img.parent().hasClass("content")||$img.parent().is("a"))return $img.parent().is("a")?$img.css("cursor","pointer"):$img.css("cursor","default"),!1;var t=$img.attr("href"),n=($img.attr("alt"),$img.attr("src")),o=$img.attr("data-src");return $img.css("cursor","zoom-in"),null!=n&&!n.startsWith("data:")||null==o||(n=o),null==t&&(t=n),!0}(e)},url:"data-src",loading:!1,navbar:2,title:2,toolbar:0})});var initMermaid=function(){for(var e=document.querySelectorAll(".language-mermaid"),t=0;t<e.length;t++){var n=e[t],o=n.innerText||n.textContent,a=document.createElement("div");a.innerHTML='<div class="mermaid">'+o+"</div>",(n=n.parentElement).parentNode.insertBefore(a,n.nextSibling),n.parentElement.removeChild(n)}};document.addEventListener("DOMContentLoaded",function(e){initMermaid()}),$(document).ready(function(){var t,n,e,o=$("#banner"),a=0,i=function(){o&&void 0!==o&&0<o.height()&&($(this).scrollTop()<=o.height()?$("#header").removeClass("nav-opaque").addClass("nav-trans"):$("#header").removeClass("nav-trans").addClass("nav-opaque"))};if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)){setTimeout(function(){e=!1,t=10,n=$(".auto_header").outerHeight(),$(document).ready(function(){return $("body").css("position","relative"),$(".auto_header").css("transition","top 0.3s ease-in-out").css("top","0").css("position","fixed").css("z-index",1100)}),$(window).scroll(function(){return i(),e=!0}),setInterval(function(){if(e)return function(){var e;e=$(this).scrollTop(),!(Math.abs(a-e)<=t)&&(a<e&&n/2<e?$(".auto_header").css("top","-"+1.2*n+"px"):e+$(window).height()<$(document).height()&&$(".auto_header").css("top","0"),a=e)}(),function(){if(o&&void 0!==o&&0<o.height()){if($(window).width()<1350)return;$(this).scrollTop()<=o.height()?$("#content-toc-box").hide():$("#content-toc-box").show()}}(),e=!1},250)},1200);i()}}),$(document).ready(function(){if(-1!==$("meta[property='theme-config']").attr("content").trim().indexOf("protectImage")){var e=$("img");e.on("contextmenu",function(){return!1}),e.on("dragstart",function(){return!1})}});var searchVisible=!1,searchDataLoad=!1,searchScriptLoad=!1;function loadScript(n){if(n=$.isFunction(n)?n:function(){},searchScriptLoad)n();else{var e=document.location.origin+"/js/semantic-search.js";$.ajaxSetup({cache:!0}),$.getScript(e).done(function(e,t){searchScriptLoad=1,n()}).fail(function(e,t,n){console.log("Loading semantic-search.js failed.")})}}function toggleSearch(){if(searchVisible?$(".search-box").css("display",""):($(".search-box").css("display","block"),setTimeout(function(){return $(".search-box input").focus()})),searchVisible=!searchVisible,!searchDataLoad){searchDataLoad=1;var e=document.location.origin+"/index.json";loadScript(function(){$.getJSON(e,function(e){$(".search-box").search({source:e,searchFields:["title","description","tip","date","tags","categories","url"],onResultsOpen:function(e){setTimeout(function(){$(".search-box").find("img").lazyload()},220)}})})})}}$(document).ready(function(){$(document).on("keydown",function(e){e.metaKey&&"/"===e.key&&!searchVisible&&toggleSearch(),"Escape"===e.key&&searchVisible&&toggleSearch()})}),$(document).ready(function(){$('#content-toc-tree a[href*="#"]').click(function(e){e.preventDefault(),$.smoothScroll({offset:-60,scrollTarget:decodeURI(this.hash),speed:500})}),$('#banner a[href*="#"]').click(function(e){e.preventDefault(),$.smoothScroll({offset:0,scrollTarget:decodeURI(this.hash),speed:500})})});